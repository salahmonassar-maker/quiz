<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø¹Ù„Ù… â€“ Ù†Ø¸Ø§Ù… Ø§Ø®ØªØ¨Ø§Ø±</title>
<style>
body{font-family:Tahoma;direction:rtl;background:#0f172a;color:#fff}
.container{max-width:1100px;margin:auto;padding:20px}
.card{background:#1e293b;padding:20px;border-radius:15px;margin-bottom:20px}
input,button{padding:10px;border-radius:10px;border:none;margin:5px}
button{background:#22c55e}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #fff;padding:10px}
</style>
</head>

<body>
<div class="container">

<h1>ğŸ‘¨â€ğŸ« Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø¹Ù„Ù…</h1>

<div class="card">
<input id="subject" placeholder="Ø§Ù„Ù…Ø§Ø¯Ø©">
<input id="topic" placeholder="Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹">
<button onclick="load()">ØªØ­Ù…ÙŠÙ„</button>
</div>

<div class="card">
<h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h3>
Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©:
<input id="qCount" type="number" value="3">
Ø§Ù„Ø²Ù…Ù† (Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚):
<input id="timeLimit" type="number" value="2">
</div>

<div class="card">
<h3>Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„</h3>
<input id="qText" style="width:90%" placeholder="Ø§Ù„Ø³Ø¤Ø§Ù„"><br>
<input id="o0" placeholder="Ø®ÙŠØ§Ø± 1">
<input id="o1" placeholder="Ø®ÙŠØ§Ø± 2">
<input id="o2" placeholder="Ø®ÙŠØ§Ø± 3">
<input id="o3" placeholder="Ø®ÙŠØ§Ø± 4"><br>
<input id="correct" type="number" min="0" max="3" placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©">
<button onclick="add()">Ø¥Ø¶Ø§ÙØ©</button>
</div>

<div class="card">
<button onclick="exportQ()">â¬‡ï¸ ØªØµØ¯ÙŠØ± Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</button>
<input type="file" onchange="importQ(event)">
</div>

<div class="card">
<h3>Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h3>
<table id="table"></table>
</div>

</div>

<script>
let key="",questions=[];

function load(){
  key="quiz_"+subject.value+"_"+topic.value;
  let data=JSON.parse(localStorage.getItem(key))||{};
  questions=data.questions||[];
  qCount.value=data.qCount||3;
  timeLimit.value=data.timeLimit||2;
  render();
}

function save(){
  localStorage.setItem(key,JSON.stringify({
    questions:questions,
    qCount:qCount.value,
    timeLimit:timeLimit.value
  }));
}

function add(){
  questions.push({
    q:qText.value,
    o:[o0.value,o1.value,o2.value,o3.value],
    a:+correct.value
  });
  qText.value=o0.value=o1.value=o2.value=o3.value=correct.value="";
  save(); render();
}

function render(){
  table.innerHTML="<tr><th>#</th><th>Ø§Ù„Ø³Ø¤Ø§Ù„</th></tr>";
  questions.forEach((q,i)=>{
    let r=table.insertRow();
    r.insertCell(0).innerText=i+1;
    r.insertCell(1).innerText=q.q;
  });
}

function exportQ(){
  let a=document.createElement("a");
  a.href=URL.createObjectURL(new Blob([JSON.stringify(questions)],{type:"application/json"}));
  a.download="questions.json";
  a.click();
}

function importQ(e){
  let r=new FileReader();
  r.onload=()=>{
    questions=JSON.parse(r.result);
    save(); render();
  };
  r.readAsText(e.target.files[0]);
}
</script>
</body>
</html>